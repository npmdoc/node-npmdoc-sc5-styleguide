<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/SC5/sc5-styleguide#readme"

    >sc5-styleguide (v1.6.0)</a>
</h1>
<h4>Styleguide generator is a handy little tool that helps you generate good looking styleguides from stylesheets using KSS notation.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide">module sc5-styleguide</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.addSection">
            function <span class="apidocSignatureSpan">sc5-styleguide.</span>addSection
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.applyStyles">
            function <span class="apidocSignatureSpan">sc5-styleguide.</span>applyStyles
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.generate">
            function <span class="apidocSignatureSpan">sc5-styleguide.</span>generate
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.server">
            function <span class="apidocSignatureSpan">sc5-styleguide.</span>server
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>angular_files</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>ast_traverser</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>at_rules</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>common</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>ignore_block</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>kss_additional_params</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>kss_parser</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>kss_splitter</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>markdown</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>pseudo_selectors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>reference_dictionary</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>section_references</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>styleguide</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>variable_parser</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sc5-styleguide.</span>wrapper_markup</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.angular_files">module sc5-styleguide.angular_files</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.angular_files.add">
            function <span class="apidocSignatureSpan">sc5-styleguide.angular_files.</span>add
            <span class="apidocSignatureSpan">(config, sections)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.ast_traverser">module sc5-styleguide.ast_traverser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.ast_traverser.traverse">
            function <span class="apidocSignatureSpan">sc5-styleguide.ast_traverser.</span>traverse
            <span class="apidocSignatureSpan">(ast, visitors)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.at_rules">module sc5-styleguide.at_rules</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.at_rules.stylesFromString">
            function <span class="apidocSignatureSpan">sc5-styleguide.at_rules.</span>stylesFromString
            <span class="apidocSignatureSpan">(string, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.common">module sc5-styleguide.common</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.common.sanitizeOptions">
            function <span class="apidocSignatureSpan">sc5-styleguide.common.</span>sanitizeOptions
            <span class="apidocSignatureSpan">(opt)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.ignore_block">module sc5-styleguide.ignore_block</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.ignore_block.removeIgnoredBlocks">
            function <span class="apidocSignatureSpan">sc5-styleguide.ignore_block.</span>removeIgnoredBlocks
            <span class="apidocSignatureSpan">(string)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.kss_additional_params">module sc5-styleguide.kss_additional_params</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.kss_additional_params.get">
            function <span class="apidocSignatureSpan">sc5-styleguide.kss_additional_params.</span>get
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.kss_additional_params.getValue">
            function <span class="apidocSignatureSpan">sc5-styleguide.kss_additional_params.</span>getValue
            <span class="apidocSignatureSpan">(varName, source)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.kss_parser">module sc5-styleguide.kss_parser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.kss_parser.parseKssSections">
            function <span class="apidocSignatureSpan">sc5-styleguide.kss_parser.</span>parseKssSections
            <span class="apidocSignatureSpan">(files, options, parsers)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.kss_splitter">module sc5-styleguide.kss_splitter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.kss_splitter.getBlocks">
            function <span class="apidocSignatureSpan">sc5-styleguide.kss_splitter.</span>getBlocks
            <span class="apidocSignatureSpan">(source, syntax, parser)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.kss_splitter.pureSplitter">
            function <span class="apidocSignatureSpan">sc5-styleguide.kss_splitter.</span>pureSplitter
            <span class="apidocSignatureSpan">(source, syntax, parser)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.markdown">module sc5-styleguide.markdown</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.markdown.getStream">
            function <span class="apidocSignatureSpan">sc5-styleguide.markdown.</span>getStream
            <span class="apidocSignatureSpan">(filePath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.markdown.processHtml">
            function <span class="apidocSignatureSpan">sc5-styleguide.markdown.</span>processHtml
            <span class="apidocSignatureSpan">(html)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.markdown.processStream">
            function <span class="apidocSignatureSpan">sc5-styleguide.markdown.</span>processStream
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.markdown.render">
            function <span class="apidocSignatureSpan">sc5-styleguide.markdown.</span>render
            <span class="apidocSignatureSpan">(string)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.pseudo_selectors">module sc5-styleguide.pseudo_selectors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.pseudo_selectors.stylesFromString">
            function <span class="apidocSignatureSpan">sc5-styleguide.pseudo_selectors.</span>stylesFromString
            <span class="apidocSignatureSpan">(cssString, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.reference_dictionary">module sc5-styleguide.reference_dictionary</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.reference_dictionary.build">
            function <span class="apidocSignatureSpan">sc5-styleguide.reference_dictionary.</span>build
            <span class="apidocSignatureSpan">(sections)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.section_references">module sc5-styleguide.section_references</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.section_references.replace">
            function <span class="apidocSignatureSpan">sc5-styleguide.section_references.</span>replace
            <span class="apidocSignatureSpan">(sections)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.styleguide">module sc5-styleguide.styleguide</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.styleguide.addSection">
            function <span class="apidocSignatureSpan">sc5-styleguide.styleguide.</span>addSection
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.styleguide.applyStyles">
            function <span class="apidocSignatureSpan">sc5-styleguide.styleguide.</span>applyStyles
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.styleguide.generate">
            function <span class="apidocSignatureSpan">sc5-styleguide.styleguide.</span>generate
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.styleguide.server">
            function <span class="apidocSignatureSpan">sc5-styleguide.styleguide.</span>server
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.variable_parser">module sc5-styleguide.variable_parser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.variable_parser.findModifierVariables">
            function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>findModifierVariables
            <span class="apidocSignatureSpan">(modifiers)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.variable_parser.findVariables">
            function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>findVariables
            <span class="apidocSignatureSpan">(string, syntax, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.variable_parser.parseVariableDeclarations">
            function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>parseVariableDeclarations
            <span class="apidocSignatureSpan">(string, syntax, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.variable_parser.parseVariableDeclarationsFromFiles">
            function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>parseVariableDeclarationsFromFiles
            <span class="apidocSignatureSpan">(files, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.variable_parser.setVariables">
            function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>setVariables
            <span class="apidocSignatureSpan">(string, syntax, variables, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sc5-styleguide.wrapper_markup">module sc5-styleguide.wrapper_markup</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sc5-styleguide.wrapper_markup.generateSectionWrapperMarkup">
            function <span class="apidocSignatureSpan">sc5-styleguide.wrapper_markup.</span>generateSectionWrapperMarkup
            <span class="apidocSignatureSpan">(sections)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide" id="apidoc.module.sc5-styleguide">module sc5-styleguide</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.addSection" id="apidoc.element.sc5-styleguide.addSection">
        function <span class="apidocSignatureSpan">sc5-styleguide.</span>addSection
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addSection = function (options) {
  var throughOpts = {
      objectMode: true,
      allowHalfOpen: false
    };

  // Parameters
  var args = minimist(process.argv.slice(2)),
    params = {
      name: args.name || args.n,
      order: args.order || args.o
    };

  var parsers = options &#x26;&#x26; options.parsers || &#x27;undefined&#x27;;

  // Validate params

  if (!params.name) {
    gutil.beep();
    gutil.log(gutil.colors.red(&#x27;Define name with --name=my-name&#x27;));
    return;
  }

  if (!params.order) {
    gutil.beep();
    gutil.log(gutil.colors.red(&#x27;Define name with --order=1.2.3&#x27;));
    return;
  }

  params.order = params.order.toString();

  var sectionRegExp = /(Styleguide )([0-9]+(\.[0-9]+)*)/;

  var allFiles = [];

  var nearestSibling = null;

  function isLess(left, right) {
    left = left.split(&#x27;.&#x27;);
    right = right.split(&#x27;.&#x27;);

    var l = false;

    for (var i = 0; i &#x3c; Math.max(left.length, right.length); i++) {
      if (parseInt(left[i]) &#x3c; parseInt(right[i])) {
        l = true;
        break;
      }
      if (parseInt(left[i]) &#x3e; parseInt(right[i])) {
        l = false;
        break;
      }
    }

    return l;
  }

  function getFinalZeros(number) {
     var match = number.match(/^(\d+(?:\.\d+)*?)((?:\.0)*)$/);
     return {
       full: number,
       pure: match[1],
       zeros: match[2]
     };
  }

<span class="apidocCodeCommentSpan">  /*function isEqual(left, right) {
    var findZeros = /^(\d+(?:\.\d+)*?)((?:\.0)*)$/;
    // Remove ending zeros
    left = left.match(findZeros);
    if (left !== null) {
      left = left[1];
    } else {
      return false;
    }
    right = right.match(findZeros);
    if (right !== null) {
      right = right[1];
    } else {
      return false;
    }

    return (left === right);
  }*/
</span>
  function ifBelongsToParent(parentSection, section) {
    var belongs = true;
    parentSection = parentSection &#x26;&#x26; parentSection.split(&#x27;.&#x27;);
    section = section.split(&#x27;.&#x27;);

    parentSection &#x26;&#x26; parentSection.forEach(function(val, n) {
      if (val !== section[n]) {
        belongs = false;
      }
    });
    return belongs;
  }

  function increaseSection(section, newSection, diff) {
    // remove final zeros
    var normalizedSection = getFinalZeros(section);
    var normalizedSectionArray = normalizedSection.pure.split(&#x27;.&#x27;);

    var normalizedNewSection = getFinalZeros(newSection);
    var normalizedNewSectionArray = normalizedNewSection.pure.split(&#x27;.&#x27;);

    // Shold increase the same register as there are in new section
    var registerIndex = normalizedNewSectionArray.length - 1;
    if (normalizedSectionArray[registerIndex]) {
      normalizedSectionArray[registerIndex] = parseInt(normalizedSectionArray[registerIndex]) + diff;
    }

    return normalizedSectionArray.join(&#x27;.&#x27;) + normalizedSection.zeros;
  }

  function changeNumber(blocks, order, fileIndex) {
    return blocks.map(function(block){
      if (!block.kss) {
        return block;
      }
      var match = block.kss.match(sectionRegExp);
      var currentNumber = match[2];

      if (isLess(currentNumber, order)) {
        return block;
      }

      var parentSection = order.split(&#x27;.&#x27;);
      parentSection.pop();
      parentSection = parentSection.join(&#x27;.&#x27;);

      if (!ifBelongsToParent(parentSection, currentNumber)) {
        return block;
      }

      /*if (isEqual(parentSection, currentNumber)) {
        console.log(&#x27;isEqual&#x27;, parentSection, currentNumber);
        return block;
      }*/

      var newVal = increaseSection(currentNumber, order, 1);

      block.kss = block.kss.replace(sectionRegExp, &#x27;$1&#x27; + newVal);
      allFiles[fileIndex].modified = true;

      return block;
    });
  }

  function bufferFileContents(file, enc, done) {

    this.push(file);

    var contents = file.contents.toString(),
      syntax = path.extname(file.path).substring(1),
      parser = parsers  ? parsers[syntax] : &#x27;undefined&#x27;,
      blocks = kssSplitter.getBlocks(contents, syntax, parser);

    // check if a block is nearest sibling;
    blocks.forEach(function(block, index) {
      if (!block.kss) {
        return;
      }
      var match = block.kss.match(sect ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Adding new section in between

You may use `addSection` helper in order to make it easier adding a new section (or subsection) in between of the existing. It shifts
 reference numbers of the following sections. To create a helping task, write this:

```js
gulp.task(&#x22;styleguide:addsection&#x22;, function() {
  return gulp.src(&#x27;path/to/components/**/*.less&#x27;)
    .pipe(styleguide.<span class="apidocCodeKeywordSpan">addSection</span>())
    .pipe(gulp.dest(&#x27;path/to/components/&#x27;))
});
```

Use this task with the parameters:

```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.applyStyles" id="apidoc.element.sc5-styleguide.applyStyles">
        function <span class="apidocSignatureSpan">sc5-styleguide.</span>applyStyles
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">applyStyles = function () {
  var throughOpts = {
    objectMode: true,
    allowHalfOpen: false
  }, stylesBuffer = &#x27;&#x27;,
    pseudoStylesBuffer = &#x27;&#x27;,
    atRulesBuffer = &#x27;&#x27;;

  function bufferFileContents(file, enc, done) {
    var pseudoStylesPromise,
      atRulesPromise;

    // Make sure file goes through the next gulp plugin
    // jshint -W040
    this.push(file);
    // jshint +W040

    // Process only CSS files
    // For example gulp-ruby-sass generatsd sourcemaps to the stream that we do not want to include
    if (path.extname(file.path) !== &#x27;.css&#x27;) {
      done();
      return;
    }

    // Add styles to common stylesheet
    stylesBuffer += file.contents.toString();

    // Create stylesheet that contains pseudo styles
    pseudoStylesPromise = Q.Promise(function(resolve) {
      pseudoStylesBuffer += pseudoSelectors.stylesFromString(file.contents.toString(), {
        source: file.path
      });
      resolve();
    });

    // Create stylesheet that contains at-rules
    atRulesPromise = Q.Promise(function(resolve) {
      atRulesBuffer += atRules.stylesFromString(file.contents.toString(), {
        source: file.path
      });
      resolve();
    });

    Q.all([pseudoStylesPromise, atRulesPromise]).then(function() {
      done();
    });
  }

  return through(throughOpts, bufferFileContents, function(cb) {
    this.push(new File({
      path: &#x27;styleguide.css&#x27;,
      contents: new Buffer(stylesBuffer)
    }));

    this.push(new File({
      path: &#x27;styleguide_pseudo_styles.css&#x27;,
      contents: new Buffer(pseudoStylesBuffer)
    }));

    this.push(new File({
      path: &#x27;styleguide_at_rules.css&#x27;,
      contents: new Buffer(atRulesBuffer)
    }));

    cb();
  }).on(&#x27;end&#x27;, function() {
    if (socketIsOpen()) {
      serverInstance[sgOptions.port].io.emitStylesChanged();
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

gulp.task(&#x27;styleguide:applystyles&#x27;, function() {
return gulp.src(&#x27;main.scss&#x27;)
  .pipe(sass({
    errLogToConsole: true
  }))
  .pipe(styleguide.<span class="apidocCodeKeywordSpan">applyStyles</span>())
  .pipe(gulp.dest(outputPath));
});

gulp.task(&#x27;watch&#x27;, [&#x27;styleguide&#x27;], function() {
// Start watching changes and update styleguide whenever changes are detected
// Styleguide automatically detects existing server instance
gulp.watch([&#x27;*.scss&#x27;], [&#x27;styleguide&#x27;]);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.generate" id="apidoc.element.sc5-styleguide.generate">
        function <span class="apidocSignatureSpan">sc5-styleguide.</span>generate
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">generate = function (options) {
  var opt = common.sanitizeOptions(options),
    filesBuffer = {},
    throughOpts = {
      objectMode: true,
      allowHalfOpen: false
    },
    styleguideProcessors = _.extend(
        {
          10: replaceSectionReferences,
          20: generateSectionWrapperMarkup
        },
        opt.styleguideProcessors
    );
  sgOptions = opt; // Copy options into global

  function bufferFileContents(file, enc, done) {
    if (file.isNull()) {
      return;
    }
    if (file.isStream()) {
      return console.error(&#x27;Styleguide does not support streams!&#x27;);
    }

    // Exclude empty files
    if (file.contents.toString(&#x27;utf8&#x27;) !== &#x27;&#x27;) {
      filesBuffer[file.path] = file.contents.toString(&#x27;utf8&#x27;);
      var hash = crypto.createHash(&#x27;md5&#x27;).update(file.path).digest(&#x27;hex&#x27;);
      fileHashes[file.path] = hash;
      fileHashes[hash] = file.path;
    }

    // Make sure file goes through the next gulp plugin
    // jshint -W040
    this.push(file);
    // jshint +W040
    done();
  }

  emitProgressStart();

  // A stream through which each file will pass
  return through(throughOpts, bufferFileContents, function(callback) {
      var _this = this,
        // Styleguide object to be built
        styleguide = {},
        // Parse KSS sections
        parseKSSPromise = kssParser.parseKssSections(filesBuffer, opt.kssOpt, opt.parsers),
        // Filter variable files
        // File paths are full absolute paths so we need to add wildcard prefix
        // Also empty wildcard should return all files
        variableFiles = opt.styleVariables ? filterFiles(filesBuffer, &#x27;**/&#x27; + opt.styleVariables) : filesBuffer,
        // Parse variable decarations from files
        parseVariablesPromise = variableParser.parseVariableDeclarationsFromFiles(variableFiles, opt);

      Q.all([parseKSSPromise, parseVariablesPromise]).spread(function(sections, variables) {
        styleguide.sections = sections;
        styleguide.variables = variables;

        // Extend config with Angular directives declared in KSS
        opt.filesConfig = angularFiles.add(opt.filesConfig, sections);

        function pushAllFiles() {
          return through.obj(function(file, enc, cb) {
            _this.push(file);
            cb();
          });
        }

        function processOverviewMarkdown(opt) {
          return Q.Promise(function(resolve) {
            if (!opt.overviewPath) {
              resolve();
            }
            markdown.getStream(opt.overviewPath)
              .pipe(rename(function(path) {
                path.basename = &#x27;overview&#x27;;
                path.extname = &#x27;.html&#x27;;
              }))
              .pipe(pushAllFiles())
              .on(&#x27;finish&#x27;, resolve);
          });
        }

        options.enablePug &#x26;&#x26; generatePugMarkup(styleguide, options);

        _.each(styleguideProcessors, function(processor) {
          processor(styleguide);
        });

        copyUsedOptionsToJsonConfig(opt, styleguide);
        appendUsedVariablesToEachBlock(opt, styleguide);
        addFileHashesAndReplaceAbsolutePaths(styleguide);

        // Create JSON containing KSS data
        _this.push(new File({
          path: &#x27;styleguide.json&#x27;,
          contents: new Buffer(JSON.stringify(styleguide))
        }));

        var stylesCompiled,
          overviewProcessed,
          filesCopied,
          favIcon,
          indexHtmlProcessed;

        overviewProcessed = processOverviewMarkdown(opt);
        var cssSrc = [distPath + &#x27;/css/styleguide-app.css&#x27;, distPath + &#x27;/css/styleguide_helper_elements.css&#x27;];

        // Copy all files (except index.html) from dist from to output stream
        filesCopied = Q.Promise(function(resolve) {
          //gulp.src([distPath + &#x27;/**&#x27;, &#x27;!&#x27; + distPath + &#x27;/index.html&#x27;, + &#x27;!&#x27; + distPath + &#x27;**/*.css&#x27;])
          var copySrc = [distPath + &#x27;/**&#x27;, &#x27;!&#x27; + distPath + &#x27;/index.html&#x27;];

          copySrc = copySrc.concat(cssSrc.map(function(item){
            return &#x27;!&#x27; + item;
          }));

          gulp.src(copySrc)
            .pipe(pushAllFiles())
            .on(&#x27;finish&#x27;, resolve); ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var gulp = require(&#x27;gulp&#x27;);
var styleguide = require(&#x27;sc5-styleguide&#x27;);
var sass = require(&#x27;gulp-sass&#x27;);
var outputPath = &#x27;output&#x27;;

gulp.task(&#x27;styleguide:generate&#x27;, function() {
  return gulp.src(&#x27;*.scss&#x27;)
    .pipe(styleguide.<span class="apidocCodeKeywordSpan">generate</span>({
        title: &#x27;My Styleguide&#x27;,
        server: true,
        rootPath: outputPath,
        overviewPath: &#x27;README.md&#x27;
      }))
    .pipe(gulp.dest(outputPath));
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.server" id="apidoc.element.sc5-styleguide.server">
        function <span class="apidocSignatureSpan">sc5-styleguide.</span>server
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">server = function (options) {
  return startServer(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.angular_files" id="apidoc.module.sc5-styleguide.angular_files">module sc5-styleguide.angular_files</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.angular_files.add" id="apidoc.element.sc5-styleguide.angular_files.add">
        function <span class="apidocSignatureSpan">sc5-styleguide.angular_files.</span>add
        <span class="apidocSignatureSpan">(config, sections)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add = function (config, sections) {

  function add(content) {
    if (!config) {
      config = [];
    }
    config.push(content);
  }

  sections.forEach(function(section) {

    if (section[&#x27;sg-angular-directive&#x27;]) {

      section[&#x27;sg-angular-directive&#x27;].files = section[&#x27;sg-angular-directive&#x27;].file;
      if (!(section[&#x27;sg-angular-directive&#x27;].files instanceof Array)) {
        section[&#x27;sg-angular-directive&#x27;].files = [
          section[&#x27;sg-angular-directive&#x27;].files
        ];
      }

      add(section[&#x27;sg-angular-directive&#x27;]);
    }
  });

  return config;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
parseVariablesPromise = variableParser.parseVariableDeclarationsFromFiles(variableFiles, opt);

      Q.all([parseKSSPromise, parseVariablesPromise]).spread(function(sections, variables) {
styleguide.sections = sections;
styleguide.variables = variables;

// Extend config with Angular directives declared in KSS
opt.filesConfig = angularFiles.<span class="apidocCodeKeywordSpan">add</span>(opt.filesConfig, sections);

function pushAllFiles() {
  return through.obj(function(file, enc, cb) {
    _this.push(file);
    cb();
  });
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.ast_traverser" id="apidoc.module.sc5-styleguide.ast_traverser">module sc5-styleguide.ast_traverser</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.ast_traverser.traverse" id="apidoc.element.sc5-styleguide.ast_traverser.traverse">
        function <span class="apidocSignatureSpan">sc5-styleguide.ast_traverser.</span>traverse
        <span class="apidocSignatureSpan">(ast, visitors)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function traverse(ast, visitors) {
  visitors.forEach(function(visitor) {
    ast = tree(ast, visitor);
  });
  return ast;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.at_rules" id="apidoc.module.sc5-styleguide.at_rules">module sc5-styleguide.at_rules</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.at_rules.stylesFromString" id="apidoc.element.sc5-styleguide.at_rules.stylesFromString">
        function <span class="apidocSignatureSpan">sc5-styleguide.at_rules.</span>stylesFromString
        <span class="apidocSignatureSpan">(string, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stylesFromString = function (string, options) {
  var ast;

  try {
    ast = css.parse(string, options);
  } catch (err) {
    console.error(&#x27;An error occurred when extracting at-rules:&#x27;, err.toString());
  }

  ast.stylesheet.rules = ast.stylesheet.rules.filter(function(rule) {
    return rule.type === &#x27;keyframes&#x27; || rule.type === &#x27;font-face&#x27;;
  });

  return css.stringify(ast);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

// Add styles to common stylesheet
stylesBuffer += file.contents.toString();

// Create stylesheet that contains pseudo styles
pseudoStylesPromise = Q.Promise(function(resolve) {
  pseudoStylesBuffer += pseudoSelectors.<span class="apidocCodeKeywordSpan">stylesFromString</span>(file.contents.toString(), {
    source: file.path
  });
  resolve();
});

// Create stylesheet that contains at-rules
atRulesPromise = Q.Promise(function(resolve) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.common" id="apidoc.module.sc5-styleguide.common">module sc5-styleguide.common</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.common.sanitizeOptions" id="apidoc.element.sc5-styleguide.common.sanitizeOptions">
        function <span class="apidocSignatureSpan">sc5-styleguide.common.</span>sanitizeOptions
        <span class="apidocSignatureSpan">(opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function sanitizeOptions(opt) {
  return {
    title: opt.title || &#x27;Styleguide Generator&#x27;,
    sass: opt.sass || {},
    less: opt.less || {},
    css: opt.css || {},
    kssOpt: opt.kssOpt || {},
    overviewPath: opt.overviewPath || path.join(__dirname, &#x27;/overview.md&#x27;),
    extraHead: (typeof opt.extraHead === &#x27;object&#x27;) ? opt.extraHead.join(&#x27;\n&#x27;) : opt.extraHead,
    beforeBody: (typeof opt.beforeBody === &#x27;object&#x27;) ? opt.beforeBody.join(&#x27;\n&#x27;) : opt.beforeBody,
    afterBody: (typeof opt.afterBody === &#x27;object&#x27;) ? opt.afterBody.join(&#x27;\n&#x27;) : opt.afterBody,
    afterSections: (typeof opt.afterSections === &#x27;object&#x27;) ? opt.afterSections.join(&#x27;\n&#x27;) : opt.afterSections,
    additionalNgDependencies: opt.additionalNgDependencies || false,
    sideNav: opt.sideNav || false,
    showMarkupSection: opt.showMarkupSection || false,
    hideSubsectionsOnMainSection: opt.hideSubsectionsOnMainSection || false,
    disableEncapsulation: opt.disableEncapsulation || false,
    disableHtml5Mode: opt.disableHtml5Mode || (typeof opt.disableHtml5Mode === &#x27;undefined&#x27; &#x26;&#x26; !opt.server) || false,
    appRoot: opt.appRoot || &#x27;&#x27;,
    commonClass: opt.commonClass || &#x27;&#x27;,
    styleVariables: opt.styleVariables || false,
    customColors: opt.customColors || false,
    favIcon: opt.favIcon || false,
    server: opt.server || false,
    port: opt.port || 3000,
    disableServerLog: opt.disableServerLog || false,
    basicAuth: opt.basicAuth || null,
    rootPath: opt.rootPath,
    readOnly: opt.readOnly || false,
    parsers: opt.parsers || {
      sass: &#x27;sass&#x27;,
      scss: &#x27;scss&#x27;,
      less: &#x27;less&#x27;,
      postcss: &#x27;postcss&#x27;
    },
    filesConfig: opt.filesConfig,
    styleguideProcessors: opt.styleguideProcessors || {}
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    filtered[filePath] = files[filePath];
  }
});
return filtered;
}

module.exports.generate = function(options) {
var opt = common.<span class="apidocCodeKeywordSpan">sanitizeOptions</span>(options),
  filesBuffer = {},
  throughOpts = {
    objectMode: true,
    allowHalfOpen: false
  },
  styleguideProcessors = _.extend(
      {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.ignore_block" id="apidoc.module.sc5-styleguide.ignore_block">module sc5-styleguide.ignore_block</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.ignore_block.removeIgnoredBlocks" id="apidoc.element.sc5-styleguide.ignore_block.removeIgnoredBlocks">
        function <span class="apidocSignatureSpan">sc5-styleguide.ignore_block.</span>removeIgnoredBlocks
        <span class="apidocSignatureSpan">(string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function removeIgnoredBlocks(string) {
  var lines = string.split(&#x27;\n&#x27;),
    results = [],
    ignoreEnabled = false;
  lines.forEach(function(line) {
    if (line.indexOf(&#x27;styleguide:ignore:start&#x27;) !== -1) {
      results.push(&#x27;&#x27;);
      ignoreEnabled = true;
    } else if (line.indexOf(&#x27;styleguide:ignore:end&#x27;) !== -1) {
      results.push(&#x27;&#x27;);
      ignoreEnabled = false;
    } else if (ignoreEnabled) {
      results.push(&#x27;&#x27;);
    } else {
      results.push(line);
    }
  });
  return results.join(&#x27;\n&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
ignoreBlock = require(&#x27;./ignore-block&#x27;);

module.exports = {

  /* Split string source into array of code and comment blocks */
  pureSplitter: function(source, syntax, parser) {
syntax = syntax || &#x27;scss&#x27;;
source = ignoreBlock.<span class="apidocCodeKeywordSpan">removeIgnoredBlocks</span>(source);

var blocks;
if (parser === &#x27;postcss&#x27;) {
  blocks = postcssParser.splitCodeAndCommentBlocks(source);
} else {
  // Suits all the syntaxes
  blocks = scssParser.splitCodeAndCommentBlocks(source, syntax);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.kss_additional_params" id="apidoc.module.sc5-styleguide.kss_additional_params">module sc5-styleguide.kss_additional_params</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.kss_additional_params.get" id="apidoc.element.sc5-styleguide.kss_additional_params.get">
        function <span class="apidocSignatureSpan">sc5-styleguide.kss_additional_params.</span>get
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (source) {

  // Remove comment markup from comments
  var comment = source.split(/\/\/[ ]?/).join(&#x27;&#x27;).split(&#x27;/*&#x27;).join(&#x27;&#x27;).split(&#x27;*/&#x27;).join(&#x27;&#x27;),
    additionalKssParams = {},
    _this = this;

  comment = standardizeLinebreaks(comment);
  comment = trimLinebreaks(comment);

  comment.split(&#x27;\n\n&#x27;).forEach(function(markUpBlock) {

    var varName = markUpBlock.match(/([^:^\n]*):[\s\S]*\n/);
    if (varName &#x26;&#x26; varName[1] !== undefined) {
      varName = varName[1].trim();
    }
    if (varName &#x26;&#x26; varName.substring(0, 3) === &#x27;sg-&#x27;) {
      additionalKssParams[varName] = _this.getValue(varName, markUpBlock);
    }

  });

  return additionalKssParams;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (!serverInstance) {
  serverInstance = {};
}
if (!serverInstance[options.port]) {
  var port = options.port;
  serverInstance[port] = sgServer(options);
  serverInstance[port].app.set(&#x27;port&#x27;, port);
  serverInstance[port].server.listen(serverInstance[port].app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;port&#x27;),
function() {
    console.log(&#x27;Express server listening on port &#x27; + serverInstance[port].server.address().port);
  }).on(&#x27;error&#x27;, function(error) {
    if (error.code === &#x27;EADDRINUSE&#x27;) {
      console.error(&#x27;Port:&#x27; + port + &#x27; is already in use.&#x27;);
      console.error(&#x27;Please provide port using --port &#x3c;port&#x3e;&#x27;);
    }
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.kss_additional_params.getValue" id="apidoc.element.sc5-styleguide.kss_additional_params.getValue">
        function <span class="apidocSignatureSpan">sc5-styleguide.kss_additional_params.</span>getValue
        <span class="apidocSignatureSpan">(varName, source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getValue = function (varName, source) {

  var body = source.substring(source.indexOf(&#x27;\n&#x27;) + 1),
    result;

  // Do not parse every variable
  if (ComplexParams.indexOf(varName) === -1) {
    result = body;
  } else {

    result = {};

    body.split(&#x27;\n&#x27;).forEach(function(line) {

      var keyVal = line.split(&#x27;:&#x27;).map(function(str) {
        str = str.trim();
        if (str.indexOf(&#x27;,&#x27;) !== -1) {
          str = str.split(&#x27;,&#x27;).map(function(s) {
            return s.trim();
          });
        }
        return str;
      });

      if (!result[keyVal[0]]) {
        // Define new value
        result[keyVal[0]] = keyVal[1];
      } else {
        // Add another value
        if (!(result[keyVal[0]] instanceof Array)) {
          result[keyVal[0]] = [
            result[keyVal[0]]
          ];
        }
        result[keyVal[0]].push(keyVal[1]);
      }

    });
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  comment.split(&#x27;\n\n&#x27;).forEach(function(markUpBlock) {

    var varName = markUpBlock.match(/([^:^\n]*):[\s\S]*\n/);
    if (varName &#x26;&#x26; varName[1] !== undefined) {
      varName = varName[1].trim();
    }
    if (varName &#x26;&#x26; varName.substring(0, 3) === &#x27;sg-&#x27;) {
      additionalKssParams[varName] = _this.<span class="apidocCodeKeywordSpan">getValue</span>(varName, markUpBlock);
    }

  });

  return additionalKssParams;
},
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.kss_parser" id="apidoc.module.sc5-styleguide.kss_parser">module sc5-styleguide.kss_parser</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.kss_parser.parseKssSections" id="apidoc.element.sc5-styleguide.kss_parser.parseKssSections">
        function <span class="apidocSignatureSpan">sc5-styleguide.kss_parser.</span>parseKssSections
        <span class="apidocSignatureSpan">(files, options, parsers)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseKssSections = function (files, options, parsers) {
  return Q.Promise(function(resolve, reject) {
    var filePromises = [],
      sections = [];

    // Process every file
    Object.keys(files).forEach(function(filePath) {
      var contents = files[filePath],
        syntax = path.extname(filePath).substring(1),
        parser = parsers  ? parsers[syntax] : &#x27;undefined&#x27;;
      filePromises.push(processFile(contents, filePath, syntax, options, parser));
    });
    // All files are processed
    Q.all(filePromises).then(function(results) {
      // Combine sections from every file to a single array
      results.map(function(result) {
        var fileSections = result.valueOf();
        if (fileSections &#x26;&#x26; fileSections.length &#x3e; 0) {
          sections = sections.concat(fileSections);
        }
      });

      // Sort sections by reference number and call main promise
      try {
        sections.sort(bySectionReference);
        resolve(sections);
      } catch (err) {
        reject(err);
      }
    }).catch(reject);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// A stream through which each file will pass
return through(throughOpts, bufferFileContents, function(callback) {
    var _this = this,
      // Styleguide object to be built
      styleguide = {},
      // Parse KSS sections
      parseKSSPromise = kssParser.<span class="apidocCodeKeywordSpan">parseKssSections</span>(filesBuffer, opt.kssOpt, opt.parsers
),
      // Filter variable files
      // File paths are full absolute paths so we need to add wildcard prefix
      // Also empty wildcard should return all files
      variableFiles = opt.styleVariables ? filterFiles(filesBuffer, &#x27;**/&#x27; + opt.styleVariables) : filesBuffer,
      // Parse variable decarations from files
      parseVariablesPromise = variableParser.parseVariableDeclarationsFromFiles(variableFiles, opt);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.kss_splitter" id="apidoc.module.sc5-styleguide.kss_splitter">module sc5-styleguide.kss_splitter</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.kss_splitter.getBlocks" id="apidoc.element.sc5-styleguide.kss_splitter.getBlocks">
        function <span class="apidocSignatureSpan">sc5-styleguide.kss_splitter.</span>getBlocks
        <span class="apidocSignatureSpan">(source, syntax, parser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getBlocks = function (source, syntax, parser) {
  var blocks = this.pureSplitter(source, syntax, parser),
    pair = {
      kss: &#x27;&#x27;,
      code: []
    },
    firstBlock = true,
    pairs = [],
    isKssMarkupBlock = /Styleguide [0-9]+/;

  blocks.forEach(function(block) {
    if (block.type === &#x27;comment&#x27;) {
      // Check if KSS
      if (isKssMarkupBlock.test(block.content)) {
        // Save old pair
        if (pair &#x26;&#x26; !firstBlock) {
          pair.code = pair.code.join(&#x27;&#x27;);
          pairs.push(pair);
        }
        // KSS starts a new block
        pair = {
          kss: block.content,
          code: []
        };
      } else {
        // Not KSS comments are considered to be parts of code
        pair.code.push(block.content);
      }
    } else {
      pair.code.push(block.content);
    }

    firstBlock = false;

  });

  // Push last pair
  pair.code = pair.code.join(&#x27;&#x27;);
  pairs.push(pair);

  return pairs;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return Q.resolve([]);
  }

  return Q.Promise(function(resolve, reject) {
    var blockPromises = [],
  blocks;
    try {
blocks = kssSplitter.<span class="apidocCodeKeywordSpan">getBlocks</span>(contents, syntax, parser);

// Process every block in the current file
blocks.forEach(function(block) {
  // Let block know about its file path
  block.filePath = filePath;
  blockPromises.push(processBlock(block, options));
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.kss_splitter.pureSplitter" id="apidoc.element.sc5-styleguide.kss_splitter.pureSplitter">
        function <span class="apidocSignatureSpan">sc5-styleguide.kss_splitter.</span>pureSplitter
        <span class="apidocSignatureSpan">(source, syntax, parser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pureSplitter = function (source, syntax, parser) {
  syntax = syntax || &#x27;scss&#x27;;
  source = ignoreBlock.removeIgnoredBlocks(source);

  var blocks;
  if (parser === &#x27;postcss&#x27;) {
    blocks = postcssParser.splitCodeAndCommentBlocks(source);
  } else {
    // Suits all the syntaxes
    blocks = scssParser.splitCodeAndCommentBlocks(source, syntax);
  }
  return blocks;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // Suits all the syntaxes
    blocks = scssParser.splitCodeAndCommentBlocks(source, syntax);
  }
  return blocks;
},

getBlocks: function(source, syntax, parser) {
  var blocks = this.<span class="apidocCodeKeywordSpan">pureSplitter</span>(source, syntax, parser),
    pair = {
      kss: &#x27;&#x27;,
      code: []
    },
    firstBlock = true,
    pairs = [],
    isKssMarkupBlock = /Styleguide [0-9]+/;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.markdown" id="apidoc.module.sc5-styleguide.markdown">module sc5-styleguide.markdown</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.markdown.getStream" id="apidoc.element.sc5-styleguide.markdown.getStream">
        function <span class="apidocSignatureSpan">sc5-styleguide.markdown.</span>getStream
        <span class="apidocSignatureSpan">(filePath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getStream = function (filePath) {
  return vfs.src(filePath)
    .pipe(this.processStream());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function processOverviewMarkdown(opt) {
  return Q.Promise(function(resolve) {
    if (!opt.overviewPath) {
      resolve();
    }
    markdown.<span class="apidocCodeKeywordSpan">getStream</span>(opt.overviewPath)
      .pipe(rename(function(path) {
        path.basename = &#x27;overview&#x27;;
        path.extname = &#x27;.html&#x27;;
      }))
      .pipe(pushAllFiles())
      .on(&#x27;finish&#x27;, resolve);
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.markdown.processHtml" id="apidoc.element.sc5-styleguide.markdown.processHtml">
        function <span class="apidocSignatureSpan">sc5-styleguide.markdown.</span>processHtml
        <span class="apidocSignatureSpan">(html)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">processHtml = function (html) {
  var $ = cheerio.load(html);
  // Switch fence code block with angular-highlightjs friendly div
  $(&#x27;pre &#x3e; code&#x27;).each(function() {
    var code = $(this);
    var lang = &#x27;&#x27;;
    // Capture any &#x22;language-&#x22; className values
    if (code.attr(&#x27;class&#x27;)) {
      lang = code.attr(&#x27;class&#x27;).split(/\s+/).reduce(function(pv, cv) {
        return pv + (cv.startsWith(&#x27;language-&#x27;) ? cv.substr(9 - cv.length) + &#x27; &#x27; : &#x27;&#x27;);
      }, &#x27;&#x27;).trim();
    }
    // Replace parent PRE element with hljs attributed DIV
    code.parent().replaceWith(
        &#x27;&#x3c;div hljs&#x27; + (lang.length ? &#x27; hljs-language=&#x22;&#x27; + lang + &#x27;&#x22;&#x27; : &#x27;&#x27;) + &#x27;&#x3e;&#x27; +
        code.html() +
        &#x27;&#x3c;/div&#x3e;&#x27;
    );
  });
  $(&#x27;p, a, li, pre, h1, h2, h3, h4, h5, h6, table, thead, tbody, tr, th, td&#x27;).not(&#x27;[sg-no-style]&#x27;).addClass(&#x27;sg&#x27;);
  excludeLinks.forEach(function(link) {
    $(&#x27;a[href^=&#x22;&#x27; + link + &#x27;&#x22;]&#x27;).remove();
  });
  $(&#x27;h1, h2, h3, h4, h5, h6&#x27;).each(function() {
    $(this).attr(&#x27;name&#x27;, dasherize($(this).text()));
  });
  // Add scroll directive to anchor links
  $(&#x27;a&#x27;).each(function() {
    var target = this.attribs &#x26;&#x26; this.attribs.href;
    if (target &#x26;&#x26; target.substring(0, 1) === &#x27;#&#x27;) {
      $(this).attr(&#x27;du-smooth-scroll&#x27;, &#x27;yes&#x27;);
    }
  });
  return $.html();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
},

render: function(string) {
  if (!string) {
    return &#x27;&#x27;;
  }
  return this.<span class="apidocCodeKeywordSpan">processHtml</span>(md.render(string));
},

processHtml: function(html) {
  var $ = cheerio.load(html);
  // Switch fence code block with angular-highlightjs friendly div
  $(&#x27;pre &#x3e; code&#x27;).each(function() {
    var code = $(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.markdown.processStream" id="apidoc.element.sc5-styleguide.markdown.processStream">
        function <span class="apidocSignatureSpan">sc5-styleguide.markdown.</span>processStream
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">processStream = function () {
  var _this = this,
  throughOpts = {
    objectMode: true,
    allowHalfOpen: false
  };

  function bufferFileContents(file, enc, done) {
    file.contents = new Buffer(_this.render(file.contents.toString()));
    // jshint -W040
    this.push(file);
    // jshint +W040
    done();
  }

  return through(throughOpts, bufferFileContents, function(cb) {
    cb();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function dasherize(str) {
return str.replace(/\s/ig, &#x27;-&#x27;).toLowerCase();
}

module.exports = {
getStream: function(filePath) {
  return vfs.src(filePath)
    .pipe(this.<span class="apidocCodeKeywordSpan">processStream</span>());
},

processStream: function() {
  var _this = this,
  throughOpts = {
    objectMode: true,
    allowHalfOpen: false
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.markdown.render" id="apidoc.element.sc5-styleguide.markdown.render">
        function <span class="apidocSignatureSpan">sc5-styleguide.markdown.</span>render
        <span class="apidocSignatureSpan">(string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">render = function (string) {
  if (!string) {
    return &#x27;&#x27;;
  }
  return this.processHtml(md.render(string));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

pugstring = bemtoinclude + section.markup;
md5 = crypto.createHash(&#x27;md5&#x27;).update(pugstring).digest(&#x27;hex&#x27;);

if (pugCache.getItem(cacheKey) &#x26;&#x26; pugCache.getItem(cacheKey).key === md5) {
  section.markup = pugCache.getItem(cacheKey).value;
} else {
  section.markup = pug.<span class="apidocCodeKeywordSpan">render</span>(pugstring, pugOptions);
  pugCache.setItem(cacheKey, {
    key : md5,
    value : section.markup
  });
}

if (section.modifiers) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.pseudo_selectors" id="apidoc.module.sc5-styleguide.pseudo_selectors">module sc5-styleguide.pseudo_selectors</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.pseudo_selectors.stylesFromString" id="apidoc.element.sc5-styleguide.pseudo_selectors.stylesFromString">
        function <span class="apidocSignatureSpan">sc5-styleguide.pseudo_selectors.</span>stylesFromString
        <span class="apidocSignatureSpan">(cssString, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stylesFromString = function (cssString, options) {
  var ast, pseudoRules = [];

  function pseudoMatcher() {
    var pseudoSelectors = [
      &#x27;hover&#x27;, &#x27;enabled&#x27;, &#x27;disabled&#x27;, &#x27;active&#x27;, &#x27;visited&#x27;,
      &#x27;focus&#x27;, &#x27;target&#x27;, &#x27;checked&#x27;, &#x27;empty&#x27;, &#x27;first-of-type&#x27;, &#x27;last-of-type&#x27;,
      &#x27;first-child&#x27;, &#x27;last-child&#x27;
    ],
      notInsideParentheses = &#x27;(?![^(]*\\))&#x27;;
    // Match all pseudo selectors that are not inside parentheses
    return new RegExp(&#x27;(\\:&#x27; + (pseudoSelectors.join(notInsideParentheses + &#x27;|\\:&#x27;)) + notInsideParentheses + &#x27;)&#x27;, &#x27;g&#x27;);
  }

  try {
    ast = css.parse(cssString, options);
  } catch (err) {
    console.error(&#x27;An error occurred when creating pseudo styles:&#x27;, err.toString());
  }

  _.each(ast.stylesheet.rules, function(rule) {
    // Get only selectors that have pseudo selector
    rule.selectors = _.filter(rule.selectors, function(selector) {
      return pseudoMatcher().test(selector);
    });
    // Replace selector pseudo class with actual class
    if (rule.selectors.length &#x3e; 0) {
      rule.selectors = _.map(rule.selectors, function(selector) {
        return selector.replace(pseudoMatcher(), function(matched) {
          return matched.replace(/\:/g, &#x27;.pseudo-class-&#x27;);
        });
      });
      pseudoRules.push(rule);
    }
  });
  ast.stylesheet.rules = pseudoRules;
  return css.stringify(ast);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

// Add styles to common stylesheet
stylesBuffer += file.contents.toString();

// Create stylesheet that contains pseudo styles
pseudoStylesPromise = Q.Promise(function(resolve) {
  pseudoStylesBuffer += pseudoSelectors.<span class="apidocCodeKeywordSpan">stylesFromString</span>(file.contents.toString(), {
    source: file.path
  });
  resolve();
});

// Create stylesheet that contains at-rules
atRulesPromise = Q.Promise(function(resolve) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.reference_dictionary" id="apidoc.module.sc5-styleguide.reference_dictionary">module sc5-styleguide.reference_dictionary</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.reference_dictionary.build" id="apidoc.element.sc5-styleguide.reference_dictionary.build">
        function <span class="apidocSignatureSpan">sc5-styleguide.reference_dictionary.</span>build
        <span class="apidocSignatureSpan">(sections)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function buildReferenceDictionary(sections) {
  var prevSections = [],
    index = {},
    nested = {
      sections: []
    },
    cursor = nested.sections;

  sections.forEach(function(section) {
    var ref = section.reference, par, length;
<span class="apidocCodeCommentSpan">    /* Check if the parent section was already mentioned
     * in the tree */
</span>    /* Put cursor to the root for the root elements */
    if (ref.indexOf(&#x27;.&#x27;) === -1 || ref.indexOf(&#x27;.0&#x27;, ref.length - 2) !== -1) {
      cursor = nested.sections;
    }
    while (ref.indexOf(&#x27;.&#x27;) !== -1) {
      ref = ref.substring(0, ref.lastIndexOf(&#x27;.&#x27;));

      /* Parent section */
      par = prevSections[prevSections.indexOf(ref)];
      if (par) {
        section.parentReference = par;
        /* Create nested container if it does not exists yet */
        index[par].sections = index[par].sections || [];
        cursor = index[par].sections;
        break;
      }
    }
    prevSections.push(section.reference);
    /* Remember where we put current section */
    length = cursor.push(section);
    index[section.reference] = cursor[length - 1];
  });

  return index;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.section_references" id="apidoc.module.sc5-styleguide.section_references">module sc5-styleguide.section_references</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.section_references.replace" id="apidoc.element.sc5-styleguide.section_references.replace">
        function <span class="apidocSignatureSpan">sc5-styleguide.section_references.</span>replace
        <span class="apidocSignatureSpan">(sections)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function replaceReferences(sections) {
  // TODO: Not to calculate twice
  var index = buildReferenceDictionary(sections);
  return sections.map(function(section) {
    findeAndReplace(section, &#x27;markup&#x27;, index);
    findeAndReplace(section, &#x27;sg-wrapper&#x27;, index);
    return section;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function generateSectionWrapperMarkup(json) {
json.section = wrapperMarkup.generateSectionWrapperMarkup(json.sections);
}

function replaceSectionReferences(json) {
json.sections = sectionReferences.<span class="apidocCodeKeywordSpan">replace</span>(json.sections);
}

function copyUsedOptionsToJsonConfig(opt, json) {
var used = [&#x27;appRoot&#x27;, &#x27;extraHead&#x27;, &#x27;beforeBody&#x27;, &#x27;afterBody&#x27;, &#x27;commonClass&#x27;, &#
x27;title&#x27;, &#x27;disableEncapsulation&#x27;, &#x27;disableHtml5Mode&#x27;, &#x27;readOnly&#x27;, &#x27;sideNav&#x27;, &#x27
;afterSections&#x27;, &#x27;showMarkupSection&#x27;, &#x27;hideSubsectionsOnMainSection&#x27;, &#x27;additionalNgDependencies&#x27
;];
json.config = {};
used.forEach(function(prop) {
  json.config[prop] = _.cloneDeep(opt[prop]);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.styleguide" id="apidoc.module.sc5-styleguide.styleguide">module sc5-styleguide.styleguide</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.styleguide.addSection" id="apidoc.element.sc5-styleguide.styleguide.addSection">
        function <span class="apidocSignatureSpan">sc5-styleguide.styleguide.</span>addSection
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addSection = function (options) {
  var throughOpts = {
      objectMode: true,
      allowHalfOpen: false
    };

  // Parameters
  var args = minimist(process.argv.slice(2)),
    params = {
      name: args.name || args.n,
      order: args.order || args.o
    };

  var parsers = options &#x26;&#x26; options.parsers || &#x27;undefined&#x27;;

  // Validate params

  if (!params.name) {
    gutil.beep();
    gutil.log(gutil.colors.red(&#x27;Define name with --name=my-name&#x27;));
    return;
  }

  if (!params.order) {
    gutil.beep();
    gutil.log(gutil.colors.red(&#x27;Define name with --order=1.2.3&#x27;));
    return;
  }

  params.order = params.order.toString();

  var sectionRegExp = /(Styleguide )([0-9]+(\.[0-9]+)*)/;

  var allFiles = [];

  var nearestSibling = null;

  function isLess(left, right) {
    left = left.split(&#x27;.&#x27;);
    right = right.split(&#x27;.&#x27;);

    var l = false;

    for (var i = 0; i &#x3c; Math.max(left.length, right.length); i++) {
      if (parseInt(left[i]) &#x3c; parseInt(right[i])) {
        l = true;
        break;
      }
      if (parseInt(left[i]) &#x3e; parseInt(right[i])) {
        l = false;
        break;
      }
    }

    return l;
  }

  function getFinalZeros(number) {
     var match = number.match(/^(\d+(?:\.\d+)*?)((?:\.0)*)$/);
     return {
       full: number,
       pure: match[1],
       zeros: match[2]
     };
  }

<span class="apidocCodeCommentSpan">  /*function isEqual(left, right) {
    var findZeros = /^(\d+(?:\.\d+)*?)((?:\.0)*)$/;
    // Remove ending zeros
    left = left.match(findZeros);
    if (left !== null) {
      left = left[1];
    } else {
      return false;
    }
    right = right.match(findZeros);
    if (right !== null) {
      right = right[1];
    } else {
      return false;
    }

    return (left === right);
  }*/
</span>
  function ifBelongsToParent(parentSection, section) {
    var belongs = true;
    parentSection = parentSection &#x26;&#x26; parentSection.split(&#x27;.&#x27;);
    section = section.split(&#x27;.&#x27;);

    parentSection &#x26;&#x26; parentSection.forEach(function(val, n) {
      if (val !== section[n]) {
        belongs = false;
      }
    });
    return belongs;
  }

  function increaseSection(section, newSection, diff) {
    // remove final zeros
    var normalizedSection = getFinalZeros(section);
    var normalizedSectionArray = normalizedSection.pure.split(&#x27;.&#x27;);

    var normalizedNewSection = getFinalZeros(newSection);
    var normalizedNewSectionArray = normalizedNewSection.pure.split(&#x27;.&#x27;);

    // Shold increase the same register as there are in new section
    var registerIndex = normalizedNewSectionArray.length - 1;
    if (normalizedSectionArray[registerIndex]) {
      normalizedSectionArray[registerIndex] = parseInt(normalizedSectionArray[registerIndex]) + diff;
    }

    return normalizedSectionArray.join(&#x27;.&#x27;) + normalizedSection.zeros;
  }

  function changeNumber(blocks, order, fileIndex) {
    return blocks.map(function(block){
      if (!block.kss) {
        return block;
      }
      var match = block.kss.match(sectionRegExp);
      var currentNumber = match[2];

      if (isLess(currentNumber, order)) {
        return block;
      }

      var parentSection = order.split(&#x27;.&#x27;);
      parentSection.pop();
      parentSection = parentSection.join(&#x27;.&#x27;);

      if (!ifBelongsToParent(parentSection, currentNumber)) {
        return block;
      }

      /*if (isEqual(parentSection, currentNumber)) {
        console.log(&#x27;isEqual&#x27;, parentSection, currentNumber);
        return block;
      }*/

      var newVal = increaseSection(currentNumber, order, 1);

      block.kss = block.kss.replace(sectionRegExp, &#x27;$1&#x27; + newVal);
      allFiles[fileIndex].modified = true;

      return block;
    });
  }

  function bufferFileContents(file, enc, done) {

    this.push(file);

    var contents = file.contents.toString(),
      syntax = path.extname(file.path).substring(1),
      parser = parsers  ? parsers[syntax] : &#x27;undefined&#x27;,
      blocks = kssSplitter.getBlocks(contents, syntax, parser);

    // check if a block is nearest sibling;
    blocks.forEach(function(block, index) {
      if (!block.kss) {
        return;
      }
      var match = block.kss.match(sect ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Adding new section in between

You may use `addSection` helper in order to make it easier adding a new section (or subsection) in between of the existing. It shifts
 reference numbers of the following sections. To create a helping task, write this:

```js
gulp.task(&#x22;styleguide:addsection&#x22;, function() {
  return gulp.src(&#x27;path/to/components/**/*.less&#x27;)
    .pipe(styleguide.<span class="apidocCodeKeywordSpan">addSection</span>())
    .pipe(gulp.dest(&#x27;path/to/components/&#x27;))
});
```

Use this task with the parameters:

```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.styleguide.applyStyles" id="apidoc.element.sc5-styleguide.styleguide.applyStyles">
        function <span class="apidocSignatureSpan">sc5-styleguide.styleguide.</span>applyStyles
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">applyStyles = function () {
  var throughOpts = {
    objectMode: true,
    allowHalfOpen: false
  }, stylesBuffer = &#x27;&#x27;,
    pseudoStylesBuffer = &#x27;&#x27;,
    atRulesBuffer = &#x27;&#x27;;

  function bufferFileContents(file, enc, done) {
    var pseudoStylesPromise,
      atRulesPromise;

    // Make sure file goes through the next gulp plugin
    // jshint -W040
    this.push(file);
    // jshint +W040

    // Process only CSS files
    // For example gulp-ruby-sass generatsd sourcemaps to the stream that we do not want to include
    if (path.extname(file.path) !== &#x27;.css&#x27;) {
      done();
      return;
    }

    // Add styles to common stylesheet
    stylesBuffer += file.contents.toString();

    // Create stylesheet that contains pseudo styles
    pseudoStylesPromise = Q.Promise(function(resolve) {
      pseudoStylesBuffer += pseudoSelectors.stylesFromString(file.contents.toString(), {
        source: file.path
      });
      resolve();
    });

    // Create stylesheet that contains at-rules
    atRulesPromise = Q.Promise(function(resolve) {
      atRulesBuffer += atRules.stylesFromString(file.contents.toString(), {
        source: file.path
      });
      resolve();
    });

    Q.all([pseudoStylesPromise, atRulesPromise]).then(function() {
      done();
    });
  }

  return through(throughOpts, bufferFileContents, function(cb) {
    this.push(new File({
      path: &#x27;styleguide.css&#x27;,
      contents: new Buffer(stylesBuffer)
    }));

    this.push(new File({
      path: &#x27;styleguide_pseudo_styles.css&#x27;,
      contents: new Buffer(pseudoStylesBuffer)
    }));

    this.push(new File({
      path: &#x27;styleguide_at_rules.css&#x27;,
      contents: new Buffer(atRulesBuffer)
    }));

    cb();
  }).on(&#x27;end&#x27;, function() {
    if (socketIsOpen()) {
      serverInstance[sgOptions.port].io.emitStylesChanged();
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

gulp.task(&#x27;styleguide:applystyles&#x27;, function() {
return gulp.src(&#x27;main.scss&#x27;)
  .pipe(sass({
    errLogToConsole: true
  }))
  .pipe(styleguide.<span class="apidocCodeKeywordSpan">applyStyles</span>())
  .pipe(gulp.dest(outputPath));
});

gulp.task(&#x27;watch&#x27;, [&#x27;styleguide&#x27;], function() {
// Start watching changes and update styleguide whenever changes are detected
// Styleguide automatically detects existing server instance
gulp.watch([&#x27;*.scss&#x27;], [&#x27;styleguide&#x27;]);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.styleguide.generate" id="apidoc.element.sc5-styleguide.styleguide.generate">
        function <span class="apidocSignatureSpan">sc5-styleguide.styleguide.</span>generate
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">generate = function (options) {
  var opt = common.sanitizeOptions(options),
    filesBuffer = {},
    throughOpts = {
      objectMode: true,
      allowHalfOpen: false
    },
    styleguideProcessors = _.extend(
        {
          10: replaceSectionReferences,
          20: generateSectionWrapperMarkup
        },
        opt.styleguideProcessors
    );
  sgOptions = opt; // Copy options into global

  function bufferFileContents(file, enc, done) {
    if (file.isNull()) {
      return;
    }
    if (file.isStream()) {
      return console.error(&#x27;Styleguide does not support streams!&#x27;);
    }

    // Exclude empty files
    if (file.contents.toString(&#x27;utf8&#x27;) !== &#x27;&#x27;) {
      filesBuffer[file.path] = file.contents.toString(&#x27;utf8&#x27;);
      var hash = crypto.createHash(&#x27;md5&#x27;).update(file.path).digest(&#x27;hex&#x27;);
      fileHashes[file.path] = hash;
      fileHashes[hash] = file.path;
    }

    // Make sure file goes through the next gulp plugin
    // jshint -W040
    this.push(file);
    // jshint +W040
    done();
  }

  emitProgressStart();

  // A stream through which each file will pass
  return through(throughOpts, bufferFileContents, function(callback) {
      var _this = this,
        // Styleguide object to be built
        styleguide = {},
        // Parse KSS sections
        parseKSSPromise = kssParser.parseKssSections(filesBuffer, opt.kssOpt, opt.parsers),
        // Filter variable files
        // File paths are full absolute paths so we need to add wildcard prefix
        // Also empty wildcard should return all files
        variableFiles = opt.styleVariables ? filterFiles(filesBuffer, &#x27;**/&#x27; + opt.styleVariables) : filesBuffer,
        // Parse variable decarations from files
        parseVariablesPromise = variableParser.parseVariableDeclarationsFromFiles(variableFiles, opt);

      Q.all([parseKSSPromise, parseVariablesPromise]).spread(function(sections, variables) {
        styleguide.sections = sections;
        styleguide.variables = variables;

        // Extend config with Angular directives declared in KSS
        opt.filesConfig = angularFiles.add(opt.filesConfig, sections);

        function pushAllFiles() {
          return through.obj(function(file, enc, cb) {
            _this.push(file);
            cb();
          });
        }

        function processOverviewMarkdown(opt) {
          return Q.Promise(function(resolve) {
            if (!opt.overviewPath) {
              resolve();
            }
            markdown.getStream(opt.overviewPath)
              .pipe(rename(function(path) {
                path.basename = &#x27;overview&#x27;;
                path.extname = &#x27;.html&#x27;;
              }))
              .pipe(pushAllFiles())
              .on(&#x27;finish&#x27;, resolve);
          });
        }

        options.enablePug &#x26;&#x26; generatePugMarkup(styleguide, options);

        _.each(styleguideProcessors, function(processor) {
          processor(styleguide);
        });

        copyUsedOptionsToJsonConfig(opt, styleguide);
        appendUsedVariablesToEachBlock(opt, styleguide);
        addFileHashesAndReplaceAbsolutePaths(styleguide);

        // Create JSON containing KSS data
        _this.push(new File({
          path: &#x27;styleguide.json&#x27;,
          contents: new Buffer(JSON.stringify(styleguide))
        }));

        var stylesCompiled,
          overviewProcessed,
          filesCopied,
          favIcon,
          indexHtmlProcessed;

        overviewProcessed = processOverviewMarkdown(opt);
        var cssSrc = [distPath + &#x27;/css/styleguide-app.css&#x27;, distPath + &#x27;/css/styleguide_helper_elements.css&#x27;];

        // Copy all files (except index.html) from dist from to output stream
        filesCopied = Q.Promise(function(resolve) {
          //gulp.src([distPath + &#x27;/**&#x27;, &#x27;!&#x27; + distPath + &#x27;/index.html&#x27;, + &#x27;!&#x27; + distPath + &#x27;**/*.css&#x27;])
          var copySrc = [distPath + &#x27;/**&#x27;, &#x27;!&#x27; + distPath + &#x27;/index.html&#x27;];

          copySrc = copySrc.concat(cssSrc.map(function(item){
            return &#x27;!&#x27; + item;
          }));

          gulp.src(copySrc)
            .pipe(pushAllFiles())
            .on(&#x27;finish&#x27;, resolve); ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var gulp = require(&#x27;gulp&#x27;);
var styleguide = require(&#x27;sc5-styleguide&#x27;);
var sass = require(&#x27;gulp-sass&#x27;);
var outputPath = &#x27;output&#x27;;

gulp.task(&#x27;styleguide:generate&#x27;, function() {
  return gulp.src(&#x27;*.scss&#x27;)
    .pipe(styleguide.<span class="apidocCodeKeywordSpan">generate</span>({
        title: &#x27;My Styleguide&#x27;,
        server: true,
        rootPath: outputPath,
        overviewPath: &#x27;README.md&#x27;
      }))
    .pipe(gulp.dest(outputPath));
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.styleguide.server" id="apidoc.element.sc5-styleguide.styleguide.server">
        function <span class="apidocSignatureSpan">sc5-styleguide.styleguide.</span>server
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">server = function (options) {
  return startServer(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.variable_parser" id="apidoc.module.sc5-styleguide.variable_parser">module sc5-styleguide.variable_parser</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.variable_parser.findModifierVariables" id="apidoc.element.sc5-styleguide.variable_parser.findModifierVariables">
        function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>findModifierVariables
        <span class="apidocSignatureSpan">(modifiers)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function findModifierVariables(modifiers) {
  var out = [];
  if (modifiers) {
    modifiers.forEach(function(modifier) {
      if (/^[\@|\$|\-\-]/.test(modifier.name)) {
        out.push(modifier.name.substring(1));
      }
    });
  }
  return out;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      section.variables = variableParser.findVariables(section.css, section.syntax, opt);
    }
  } catch (e) {
    console.error(&#x27;Could not parse used variables from section&#x27;, section.reference + &#x27;:&#x27;);
    console.error(e.toString());
  }

  variableParser.<span class="apidocCodeKeywordSpan">findModifierVariables</span>(section.modifiers).forEach(function(varName) {
    if (!section.variables || section.variables.indexOf(varName) === -1) {
      section.variables = section.variables || [];
      section.variables.push(varName);
    }
  });
  return section;
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.variable_parser.findVariables" id="apidoc.element.sc5-styleguide.variable_parser.findVariables">
        function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>findVariables
        <span class="apidocSignatureSpan">(string, syntax, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function findVariables(string, syntax, options) {
  string = ignoreBlock.removeIgnoredBlocks(string);
  var parser = getParserForSyntax(syntax, options);
  if (parser) {
    return parser.findVariables(string);
  }
  return [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function appendUsedVariablesToEachBlock(opt, styleguide) {
  // Go trough every styleguide style block and find used variables
  styleguide.sections.forEach(function(section) {
// It is possible that the CSS is not valid anymore after it is splitted to sections
// We need to catch possible parsing errors
try {
  if (section.css) {
    section.variables = variableParser.<span class="apidocCodeKeywordSpan">findVariables</span>(section.css, section.syntax, opt
);
  }
} catch (e) {
  console.error(&#x27;Could not parse used variables from section&#x27;, section.reference + &#x27;:&#x27;);
  console.error(e.toString());
}

variableParser.findModifierVariables(section.modifiers).forEach(function(varName) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.variable_parser.parseVariableDeclarations" id="apidoc.element.sc5-styleguide.variable_parser.parseVariableDeclarations">
        function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>parseVariableDeclarations
        <span class="apidocSignatureSpan">(string, syntax, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseVariableDeclarations(string, syntax, options) {
  string = ignoreBlock.removeIgnoredBlocks(string);
  var parser = getParserForSyntax(syntax, options);
  if (parser) {
    return parser.parseVariableDeclarations(string);
  }
  return [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function updateVariableValues(file) {
  file.contents = parser.setVariables(file.contents, file.syntax, file.variables, options);
}

function checkSyntax(file) {
  parser.<span class="apidocCodeKeywordSpan">parseVariableDeclarations</span>(file.contents, file.syntax, options);
}

function writeFileContents(file) {
  fs.writeFileSync(file.path, file.contents, { encoding: &#x27;utf8&#x27; });
}

function emitProgressStart() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.variable_parser.parseVariableDeclarationsFromFiles" id="apidoc.element.sc5-styleguide.variable_parser.parseVariableDeclarationsFromFiles">
        function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>parseVariableDeclarationsFromFiles
        <span class="apidocSignatureSpan">(files, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseVariableDeclarationsFromFiles(files, options) {
  var filePromises = Object.keys(files).map(function(filePath) {
    var contents = files[filePath],
        syntax = path.extname(filePath).substring(1);

    return Q.promise(function(resolve) {
      var fileVariables = parseVariableDeclarations(contents, syntax, options);
      // Map correct file name to every variable
      fileVariables.forEach(function(variable) {
        variable.file = filePath;
      });
      resolve(fileVariables);
    });
  });

  return Q.all(filePromises).then(function(results) {
    return _.chain(results).flatten().sortBy(&#x27;file&#x27;).value();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Parse KSS sections
parseKSSPromise = kssParser.parseKssSections(filesBuffer, opt.kssOpt, opt.parsers),
// Filter variable files
// File paths are full absolute paths so we need to add wildcard prefix
// Also empty wildcard should return all files
variableFiles = opt.styleVariables ? filterFiles(filesBuffer, &#x27;**/&#x27; + opt.styleVariables) : filesBuffer,
// Parse variable decarations from files
parseVariablesPromise = variableParser.<span class="apidocCodeKeywordSpan">parseVariableDeclarationsFromFiles</span>(variableFiles
, opt);

      Q.all([parseKSSPromise, parseVariablesPromise]).spread(function(sections, variables) {
styleguide.sections = sections;
styleguide.variables = variables;

// Extend config with Angular directives declared in KSS
opt.filesConfig = angularFiles.add(opt.filesConfig, sections);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sc5-styleguide.variable_parser.setVariables" id="apidoc.element.sc5-styleguide.variable_parser.setVariables">
        function <span class="apidocSignatureSpan">sc5-styleguide.variable_parser.</span>setVariables
        <span class="apidocSignatureSpan">(string, syntax, variables, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setVariables(string, syntax, variables, options) {
  var parser = getParserForSyntax(syntax, options);
  if (parser) {
    return parser.setVariables(string, variables, options);
  }
  return string;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function readFileContents(file) {
  file.contents = fs.readFileSync(file.path, { encoding: &#x27;utf8&#x27; });
}

function updateVariableValues(file) {
  file.contents = parser.<span class="apidocCodeKeywordSpan">setVariables</span>(file.contents, file.syntax, file.variables, options
);
}

function checkSyntax(file) {
  parser.parseVariableDeclarations(file.contents, file.syntax, options);
}

function writeFileContents(file) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sc5-styleguide.wrapper_markup" id="apidoc.module.sc5-styleguide.wrapper_markup">module sc5-styleguide.wrapper_markup</a></h1>


    <h2>
        <a href="#apidoc.element.sc5-styleguide.wrapper_markup.generateSectionWrapperMarkup" id="apidoc.element.sc5-styleguide.wrapper_markup.generateSectionWrapperMarkup">
        function <span class="apidocSignatureSpan">sc5-styleguide.wrapper_markup.</span>generateSectionWrapperMarkup
        <span class="apidocSignatureSpan">(sections)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function generateSectionWrapperMarkup(sections) {
<span class="apidocCodeCommentSpan">  /* Calculate own wrapper */
</span>  var wrapper,
      wrapperKeyword = &#x27;&#x3c;sg-wrapper-content/&#x3e;&#x27;,
      wrapperRegExp,
  // TODO: do not calculate twice
      index = buildReferenceDictionary(sections);

  return sections.map(function(section) {
    wrapper = section[&#x27;sg-wrapper&#x27;] || wrapperKeyword;
    wrapperRegExp = new RegExp(wrapperKeyword, &#x27;g&#x27;);
    /* Wrap a wrapper with a parent wrapper */
    if (section.parentReference) {
      var parentWrapper = index[section.parentReference].wrapper;
      wrapper = parentWrapper.replace(wrapperRegExp, wrapper);
    }

    section.wrapper = wrapper;
    if (section.markup) {
      /* Wrap markup */
      section.renderMarkup = section.markup;
      section.renderMarkup = section.wrapper.replace(wrapperRegExp, section.markup);
    }

    /* Wrap modifiers */
    section.modifiers.forEach(function(modifier) {
      /* Wrap modifier markup */
      modifier.renderMarkup = modifier.markup;
      modifier.renderMarkup = section.wrapper.replace(wrapperRegExp, modifier.markup);
    });

    /* Clean nested sections */
    delete section.sections;
    return section;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (section.modifiers) {
      _.each(section.modifiers, convertToPug);
    }
  }
}

function generateSectionWrapperMarkup(json) {
  json.section = wrapperMarkup.<span class="apidocCodeKeywordSpan">generateSectionWrapperMarkup</span>(json.sections);
}

function replaceSectionReferences(json) {
  json.sections = sectionReferences.replace(json.sections);
}

function copyUsedOptionsToJsonConfig(opt, json) {
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
